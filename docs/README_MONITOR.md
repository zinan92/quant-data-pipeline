# æ¿å—ç›‘æ§ç³»ç»Ÿ ğŸ“Š

å®æ—¶ç›‘æ§Aè‚¡æ¦‚å¿µæ¿å—ï¼Œæä¾›RESTful APIæ¥å£ï¼Œå®Œç¾é›†æˆåˆ°ä½ çš„äº¤æ˜“é¢æ¿ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- âœ… **å®æ—¶ç›‘æ§** - 2-3åˆ†é’Ÿè‡ªåŠ¨æ›´æ–°æ¿å—æ•°æ®
- âœ… **æ¶¨åœç»Ÿè®¡** - è‡ªåŠ¨è®¡ç®—æ¿å—å†…æ¶¨åœè‚¡ç¥¨æ•°é‡
- âœ… **åŒé‡è§†è§’** - æ¶¨å¹…å‰20 + è‡ªé€‰çƒ­é—¨æ¦‚å¿µ
- âœ… **å®Œæ•´æ•°æ®** - æ¶¨å¹…ã€èµ„é‡‘æµã€æ¶¨è·Œå®¶æ•°ã€é‡æ¯”ç­‰16ä¸ªå­—æ®µ
- âœ… **RESTful API** - æ ‡å‡†HTTPæ¥å£ï¼Œæ”¯æŒä»»ä½•å‰ç«¯æ¡†æ¶
- âœ… **åŒ¹é…é£æ ¼** - æ·±è‰²ä¸»é¢˜ï¼Œçº¢ç»¿é…è‰²ï¼Œå®Œç¾èå…¥äº¤æ˜“é¢æ¿

---

## ğŸ¯ æ•°æ®å±•ç¤º

### è¡¨æ ¼åˆ—ï¼ˆåŸºäºä½ çš„æˆªå›¾è®¾è®¡ï¼‰

| æ’å | åç§° | æ¶¨å¹…% | æ¶¨é€Ÿ | ä¸»åŠ›å‡€é‡ | ä¸»åŠ›å‡€æµå…¥ | é‡æ¯” | æ¶¨å®¶æ•° | è·Œå®¶æ•° | **æ¶¨åœæ•°** | 5æ—¥æ¶¨å¹… | ... |
|------|------|-------|------|----------|-----------|------|--------|--------|-----------|---------|-----|
| 1 | åŠå¯¼ä½“ | +4.25% | 0.06 | 3.77 | 144.94äº¿ | 1.45 | 160 | 11 | **8** | +6.36% | ... |
| 2 | å­˜å‚¨èŠ¯ç‰‡ | +4.08% | 0.07 | 5.61 | 164.81äº¿ | 1.29 | 145 | 20 | **12** | +5.89% | ... |

> **æ¶¨åœæ•°**åˆ—æ˜¯æ–°å¢åŠŸèƒ½ï¼Œå®æ—¶ç»Ÿè®¡æ¿å—å†…æ¶¨åœè‚¡ç¥¨æ•°é‡

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip3 install flask flask-cors akshare pandas
```

### 2. å¯åŠ¨æœåŠ¡

```bash
python3 scripts/api_server.py
```

### 3. æŸ¥çœ‹æ•ˆæœ

æµè§ˆå™¨æ‰“å¼€ï¼š`docs/demo.html`

---

## ğŸ“¡ APIæ¥å£

### æ¶¨å¹…å‰20æ¿å—
```bash
GET http://localhost:5000/api/concepts/top?n=20
```

### è‡ªé€‰çƒ­é—¨æ¦‚å¿µ
```bash
GET http://localhost:5000/api/concepts/watch
```

### è¿”å›æ ¼å¼
```json
{
  "success": true,
  "timestamp": "2026-01-16 15:30:25",
  "total": 20,
  "data": [
    {
      "rank": 1,
      "name": "åŠå¯¼ä½“",
      "changePct": 4.25,
      "moneyInflow": 144.94,
      "upCount": 160,
      "downCount": 11,
      "limitUp": 8,
      "..."
    }
  ]
}
```

---

## ğŸ¨ å‰ç«¯é›†æˆ

### React
```jsx
const [data, setData] = useState([]);

useEffect(() => {
  const fetch = async () => {
    const res = await fetch('http://localhost:5000/api/concepts/top?n=20');
    const json = await res.json();
    setData(json.data);
  };
  fetch();
  setInterval(fetch, 150000); // 2.5åˆ†é’Ÿ
}, []);
```

### Vue
```vue
<script setup>
const data = ref([]);
const fetch = async () => {
  const res = await fetch('http://localhost:5000/api/concepts/top?n=20');
  const json = await res.json();
  data.value = json.data;
};
onMounted(() => {
  fetch();
  setInterval(fetch, 150000);
});
</script>
```

å®Œæ•´ç¤ºä¾‹è§ï¼š`docs/frontend_integration.md`

---

## âš™ï¸ é…ç½®

### ä¿®æ”¹è‡ªé€‰æ¦‚å¿µ

ç¼–è¾‘ `scripts/api_server.py`ï¼š

```python
WATCH_LIST = [
    "å…ˆè¿›å°è£…",
    "å­˜å‚¨èŠ¯ç‰‡",
    "å…‰åˆ»æœº",
    # æ·»åŠ ä½ çš„è‡ªé€‰...
]
```

### ä¿®æ”¹æ›´æ–°é¢‘ç‡

```python
time.sleep(150)  # 150ç§’ = 2.5åˆ†é’Ÿ
```

---

## ğŸ“Š æ•°æ®æ¥æº

- **æ¿å—æ•°æ®**ï¼šåŒèŠ±é¡ºæ¦‚å¿µæ¿å—ï¼ˆé€šè¿‡AKShareè·å–ï¼‰
- **æˆåˆ†è‚¡æ•°æ®**ï¼šä¸œæ–¹è´¢å¯Œï¼ˆç”¨äºæ¶¨åœç»Ÿè®¡ï¼‰
- **æ›´æ–°é¢‘ç‡**ï¼š2-3åˆ†é’Ÿ/è½®
- **æ•°æ®å»¶è¿Ÿ**ï¼šçº¦5ç§’ï¼ˆäº¤æ˜“æ—¶é—´å†…ï¼‰

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
scripts/
â”œâ”€â”€ api_server.py           # Flask APIæœåŠ¡ï¼ˆä¸»æ–‡ä»¶ï¼‰
â”œâ”€â”€ realtime_monitor.py     # ç‹¬ç«‹ç›‘æ§è„šæœ¬
â”œâ”€â”€ fetch_top_sectors.py    # å•æ¬¡æŠ“å–è„šæœ¬
â””â”€â”€ requirements.txt        # ä¾èµ–åˆ—è¡¨

docs/
â”œâ”€â”€ demo.html               # æ¼”ç¤ºé¡µé¢
â”œâ”€â”€ frontend_integration.md # å‰ç«¯é›†æˆè¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ QUICKSTART.md           # å¿«é€Ÿå¼€å§‹æŒ‡å—
â””â”€â”€ display_options.md      # å±•ç¤ºæ–¹æ¡ˆå¯¹æ¯”
```

---

## ğŸ” APIç«¯ç‚¹åˆ—è¡¨

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/concepts/top` | GET | æ¶¨å¹…å‰Næ¿å—ï¼ˆé»˜è®¤20ï¼‰|
| `/api/concepts/watch` | GET | è‡ªé€‰çƒ­é—¨æ¦‚å¿µ |
| `/api/concepts/all` | GET | æ‰€æœ‰æ¿å—ï¼ˆæ”¯æŒåˆ†é¡µ/æ’åºï¼‰|
| `/api/status` | GET | ç³»ç»ŸçŠ¶æ€ |
| `/api/config/watch-list` | GET/POST | è‡ªé€‰åˆ—è¡¨ç®¡ç† |

---

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### 1. åµŒå…¥äº¤æ˜“é¢æ¿
å°†è¡¨æ ¼ç»„ä»¶åµŒå…¥åˆ°ä½ ç°æœ‰çš„äº¤æ˜“ç³»ç»Ÿä¸­ï¼Œå®æ—¶ç›‘æ§çƒ­é—¨æ¿å—

### 2. ç‹¬ç«‹ç›‘æ§é¡µé¢
ä½¿ç”¨æä¾›çš„demo.htmlä½œä¸ºç‹¬ç«‹ç›‘æ§é¡µé¢

### 3. æ•°æ®åˆ†æ
é€šè¿‡APIè·å–æ•°æ®ï¼Œè¿›è¡Œé‡åŒ–åˆ†æå’Œå›æµ‹

### 4. å‘Šè­¦æ¨é€
åŸºäºAPIæ•°æ®è‡ªå®šä¹‰å‘Šè­¦è§„åˆ™ï¼ˆå¦‚æ¶¨åœæ•°>10æ—¶æ¨é€ï¼‰

---

## ğŸ¯ æ•°æ®å­—æ®µå®Œæ•´åˆ—è¡¨

| å­—æ®µ | è¯´æ˜ | æ ¼å¼ |
|------|------|------|
| rank | æ’å | int |
| name | æ¿å—åç§° | string |
| code | æ¿å—ä»£ç  | string |
| changePct | æ¶¨å¹…% | float |
| changeValue | æ¶¨é€Ÿ | float |
| mainVolume | ä¸»åŠ›å‡€é‡ | float |
| moneyInflow | ä¸»åŠ›å‡€æµå…¥ | float (äº¿) |
| volumeRatio | é‡æ¯” | float |
| upCount | æ¶¨å®¶æ•° | int |
| downCount | è·Œå®¶æ•° | int |
| **limitUp** | **æ¶¨åœæ•°** â­ | int |
| day5Change | 5æ—¥æ¶¨å¹…% | float |
| day10Change | 10æ—¥æ¶¨å¹…% | float |
| day20Change | 20æ—¥æ¶¨å¹…% | float |
| volume | æ€»é‡(ä¸‡æ‰‹) | float |
| turnover | æ€»é‡‘é¢(äº¿) | float |
| marketCap | æ€»å¸‚å€¼(ä¸‡äº¿) | float |
| circulatingCap | æµé€šå¸‚å€¼(ä¸‡äº¿) | float |

---

## ğŸ› æ•…éšœæ’æŸ¥

### æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :5000

# æ›´æ¢ç«¯å£ï¼ˆä¿®æ”¹api_server.pyæœ€åä¸€è¡Œï¼‰
app.run(host='0.0.0.0', port=5001)
```

### æ•°æ®æ›´æ–°æ…¢
- æ­£å¸¸ç°è±¡ï¼Œé¦–æ¬¡å¯åŠ¨éœ€è¦5-10åˆ†é’Ÿ
- åç»­æ¯è½®2.5åˆ†é’Ÿ

### å‰ç«¯æ— æ³•è¿æ¥
- æ£€æŸ¥APIæœåŠ¡æ˜¯å¦è¿è¡Œ
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°CORSé”™è¯¯
- ç¡®è®¤URLåœ°å€æ­£ç¡®ï¼ˆlocalhost:5000ï¼‰

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- å¿«é€Ÿå¼€å§‹ï¼š`docs/QUICKSTART.md`
- é›†æˆæ–‡æ¡£ï¼š`docs/frontend_integration.md`
- å±•ç¤ºæ–¹æ¡ˆï¼š`docs/display_options.md`

---

## ğŸ“œ è®¸å¯è¯

MIT License

---

**ç¥äº¤æ˜“é¡ºåˆ©ï¼ğŸ“ˆ**
